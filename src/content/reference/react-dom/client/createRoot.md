---
title: createRoot
---

<Intro>

`createRoot` å…è®¸åœ¨æµè§ˆå™¨çš„ DOM èŠ‚ç‚¹ä¸­åˆ›å»ºæ ¹èŠ‚ç‚¹ä»¥æ˜¾ç¤º React ç»„ä»¶ã€‚

```js
const root = createRoot(domNode, options?)
```

</Intro>

<InlineToc />

---

## å‚è€ƒ {/*reference*/}

### `createRoot(domNode, options?)` {/*createroot*/}

è°ƒç”¨ `createRoot` ä»¥åœ¨æµè§ˆå™¨ DOM å…ƒç´ ä¸­åˆ›å»ºæ ¹èŠ‚ç‚¹æ˜¾ç¤ºå†…å®¹ã€‚

```js
import { createRoot } from 'react-dom/client';

const domNode = document.getElementById('root');
const root = createRoot(domNode);
```

React å°†ä¼šä¸º `domNode` åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¹¶æ§åˆ¶å…¶ä¸­çš„ DOMã€‚åœ¨å·²ç»åˆ›å»ºæ ¹èŠ‚ç‚¹ä¹‹åï¼Œéœ€è¦è°ƒç”¨ [`root.render`](#root-render) æ¥æ˜¾ç¤º React ç»„ä»¶ï¼š

```js
root.render(<App />);
```

å¯¹äºä¸€ä¸ªå®Œå…¨ç”¨ React æ„å»ºçš„åº”ç”¨ç¨‹åºï¼Œé€šå¸¸ä¼šè°ƒç”¨ä¸€ä¸ª `createRoot` æ¥åˆ›å»ºå®ƒçš„æ ¹èŠ‚ç‚¹ã€‚è€Œå¯¹äºä¸€ä¸ªä½¿ç”¨äº†â€œå°‘é‡â€ React æ¥åˆ›å»ºéƒ¨åˆ†å†…å®¹çš„åº”ç”¨ç¨‹åºï¼Œåˆ™è¦æŒ‰å…·ä½“éœ€æ±‚æ¥ç¡®å®šæ ¹èŠ‚ç‚¹çš„æ•°é‡ã€‚

[å‚è§ä¸‹æ–¹æ›´å¤šç¤ºä¾‹](#usage)ã€‚

#### å‚æ•° {/*parameters*/}

* `domNode`ï¼šä¸€ä¸ª [DOM å…ƒç´ ](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)ã€‚React å°†ä¸ºè¿™ä¸ª DOM å…ƒç´ åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ç„¶åå…è®¸ä½ åœ¨è¿™ä¸ªæ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨å‡½æ•°ï¼Œæ¯”å¦‚ `render` æ¥æ˜¾ç¤ºæ¸²æŸ“çš„ React å†…å®¹ã€‚

* **å¯é€‰** `options`ï¼šç”¨äºé…ç½®è¿™ä¸ª React æ ¹èŠ‚ç‚¹çš„å¯¹è±¡ã€‚

  * **optional** `onCaughtError`: Callback called when React catches an error in an Error Boundary. Called with the `error` caught by the Error Boundary, and an `errorInfo` object containing the `componentStack`.
  * **optional** `onUncaughtError`: Callback called when an error is thrown and not caught by an Error Boundary. Called with the `error` that was thrown, and an `errorInfo` object containing the `componentStack`.
  * **optional** `onRecoverableError`: Callback called when React automatically recovers from errors. Called with an `error` React throws, and an `errorInfo` object containing the `componentStack`. Some recoverable errors may include the original error cause as `error.cause`.
  * **optional** `identifierPrefix`: A string prefix React uses for IDs generated by [`useId`.](/reference/react/useId) Useful to avoid conflicts when using multiple roots on the same page.

#### è¿”å›å€¼ {/*returns*/}

`createRoot` è¿”å›ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªæ–¹æ³•çš„çš„å¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ï¼š[`render`](#root-render) å’Œ [`unmount`](#root-unmount)ã€‚

#### æ³¨æ„ {/*caveats*/}
* å¦‚æœåº”ç”¨ç¨‹åºæ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨ `createRoot()`ã€‚è¯·ä½¿ç”¨ [`hydrateRoot()`](/reference/react-dom/client/hydrateRoot) æ›¿ä»£å®ƒã€‚
* åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¯èƒ½åªè°ƒç”¨äº†ä¸€æ¬¡ `createRoot`ã€‚ä½†å¦‚æœä½ ä½¿ç”¨äº†æ¡†æ¶ï¼Œå®ƒå¯èƒ½å·²ç»è‡ªåŠ¨å¸®ä½ å®Œæˆäº†è¿™æ¬¡è°ƒç”¨ã€‚
* å½“ä½ æƒ³è¦æ¸²æŸ“ä¸€æ®µ JSXï¼Œä½†æ˜¯å®ƒå­˜åœ¨äº DOM æ ‘çš„å…¶ä»–ä½ç½®ï¼Œå¹¶éå½“å‰ç»„ä»¶çš„å­ç»„ä»¶æ—¶ï¼ˆæ¯”å¦‚ï¼Œä¸€ä¸ªå¼¹çª—æˆ–è€…æç¤ºæ¡†ï¼‰ï¼Œä½¿ç”¨ [`createPortal`](/reference/react-dom/createPortal) æ›¿ä»£ `createRoot`ã€‚

---

### `root.render(reactNode)` {/*root-render*/}

è°ƒç”¨ `root.render` ä»¥å°†ä¸€æ®µ [JSX](/learn/writing-markup-with-jsx)ï¼ˆâ€œReact èŠ‚ç‚¹â€ï¼‰åœ¨ React çš„æ ¹èŠ‚ç‚¹ä¸­æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹å¹¶æ˜¾ç¤ºã€‚

```js
root.render(<App />);
```

React å°†ä¼šåœ¨ `æ ¹èŠ‚ç‚¹` ä¸­æ˜¾ç¤º `<App />` ç»„ä»¶ï¼Œå¹¶ä¸”æ§åˆ¶ç»„ä»¶ä¸­çš„ DOMã€‚

[å‚è§ä¸‹æ–¹æ›´å¤šç¤ºä¾‹](#usage)ã€‚

#### å‚æ•° {/*root-render-parameters*/}

* `reactNode`ï¼šä¸€ä¸ªä½ æƒ³è¦æ˜¾ç¤ºçš„ **React èŠ‚ç‚¹**ã€‚å®ƒæ€»æ˜¯ä¸€æ®µ JSXï¼Œå°±åƒ `<App />`ï¼Œä½†æ˜¯ä½ ä¹Ÿæ€»æ˜¯å¯ä»¥ä¼ é€’ä¸€ä¸ª [`createElement()`](/reference/react/createElement) æ„é€ çš„ React å…ƒç´ ã€ä¸€ä¸ªå­—ç¬¦ä¸²ã€ä¸€ä¸ªæ•°å­—ã€`null` æˆ–è€… `undefined`ã€‚


#### è¿”å›å€¼ {/*root-render-returns*/}

`root.render` è¿”å› `undefined`ã€‚

#### æ³¨æ„ {/*root-render-caveats*/}

* é¦–æ¬¡è°ƒç”¨ `root.render` æ—¶ï¼ŒReact ä¼šå…ˆæ¸…ç©ºæ ¹èŠ‚ç‚¹ä¸­æ‰€æœ‰å·²ç»å­˜åœ¨çš„ HTMLï¼Œç„¶åæ‰ä¼šæ¸²æŸ“ React ç»„ä»¶ã€‚

* å¦‚æœä½ çš„æ ¹èŠ‚ç‚¹åŒ…å«äº†ç”± React åœ¨æ„å»ºæœŸé—´é€šè¿‡æœåŠ¡ç«¯æ¸²æŸ“ç”Ÿæˆçš„ HTML å†…å®¹ï¼Œè¯·ä½¿ç”¨ [`hydrateRoot()`](/reference/react-dom/client/hydrateRoot) æ›¿ä»£è¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ ·æ‰èƒ½æŠŠäº‹ä»¶å¤„ç†ç¨‹åºå’Œç°æœ‰çš„ HTML ç»‘å®šã€‚

å¦‚æœä½ åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Šå¤šæ¬¡è°ƒç”¨äº† `render`ï¼ŒReact ä»ç„¶ä¼šæ›´æ–° DOMï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ˜¾ç¤ºçš„å†…å®¹æ˜¯æœ€æ–°çš„ã€‚React å°†ä¼šç­›é€‰å‡ºå¯å¤ç”¨çš„éƒ¨åˆ†å’Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¯¹äºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œæ˜¯ React é€šè¿‡ä¸ä¹‹å‰æ¸²æŸ“çš„æ ‘è¿›è¡Œ [â€œæ¯”è¾ƒâ€](/learn/preserving-and-resetting-state) å¾—åˆ°çš„ã€‚åœ¨åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Šå†æ¬¡è°ƒç”¨ `render` å°±å’Œåœ¨æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ [`set` å‡½æ•°](/reference/react/useState#setstate) ç±»ä¼¼ï¼šReact ä¼šé¿å…æ²¡å¿…è¦çš„ DOM æ›´æ–°ã€‚

* Although rendering is synchronous once it starts, `root.render(...)` is not. This means code after `root.render()` may run before any effects (`useLayoutEffect`, `useEffect`) of that specific render are fired. This is usually fine and rarely needs adjustment. In rare cases where effect timing matters, you can wrap `root.render(...)` in [`flushSync`](https://react.dev/reference/react-dom/flushSync) to ensure the initial render runs fully synchronously.
  
  ```js
  const root = createRoot(document.getElementById('root'));
  root.render(<App />);
  // ğŸš© The HTML will not include the rendered <App /> yet:
  console.log(document.body.innerHTML);
  ```

---

### `root.unmount()` {/*root-unmount*/}

è°ƒç”¨ `root.unmount` ä»¥é”€æ¯ React æ ¹èŠ‚ç‚¹ä¸­çš„ä¸€ä¸ªå·²ç»æ¸²æŸ“çš„æ ‘ã€‚

```js
root.unmount();
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®Œå…¨ç”± React æ„å»ºçš„åº”ç”¨ç¨‹åºä¸ä¼šè°ƒç”¨ `root.unmount`ã€‚

æ­¤æ–¹æ³•é€‚ç”¨çš„åœºæ™¯æ˜¯ï¼ŒReact æ ¹èŠ‚ç‚¹ä¸­çš„ DOM èŠ‚ç‚¹ï¼ˆæˆ–è€…å®ƒçš„ä»»ä½•ä¸€ä¸ªçˆ¶çº§èŠ‚ç‚¹ï¼‰è¢«é™¤äº†è¿™ä¸ªæ–¹æ³•ä»¥å¤–çš„ä»£ç ç§»é™¤äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè¯•æƒ³åœ¨ä¸€ä¸ª jQuery é€‰é¡¹å¡é¢æ¿ä¸­ï¼Œéæ´»è·ƒçŠ¶æ€çš„é€‰é¡¹å¡çš„ DOM ç»“æ„å°†è¢«ç§»é™¤ã€‚ä¸€ä¸ªæ ‡ç­¾é¡µè¢«ç§»é™¤æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬ React æ ¹èŠ‚ç‚¹ï¼‰ä¹Ÿå°†ä¼šä» DOM æ ‘ç§»é™¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ‰éœ€è¦è°ƒç”¨ `root.unmount` æ¥é€šçŸ¥ React â€œåœæ­¢â€æ§åˆ¶å·²ç»è¢«ç§»é™¤çš„æ ¹èŠ‚ç‚¹çš„å†…å®¹ã€‚å¦åˆ™ï¼Œè¢«ç§»é™¤çš„æ ¹èŠ‚ç‚¹çš„å†…éƒ¨ç»„ä»¶å°±ä¸èƒ½åŠæ—¶é‡Šæ”¾æ¶ˆæ¯è®¢é˜…ç­‰èµ„æºã€‚

è°ƒç”¨ `root.unmout` å°†å¸è½½æ ¹èŠ‚ç‚¹å†…çš„æ‰€æœ‰ç»„ä»¶ï¼Œè¯¥æ ¹èŠ‚ç‚¹ä¸Šçš„ React å°†è¢«å‰¥ç¦»ï¼Œå³æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠç»„ä»¶æ ‘ä¸Šçš„çŠ¶æ€å°†è¢«ç§»é™¤ã€‚

#### å‚æ•° {/*root-unmount-parameters*/}

`root.unmount` ä¸æ¥æ”¶ä»»ä½•å‚æ•°ã€‚


#### è¿”å›å€¼ {/*root-unmount-returns*/}

`root.unmount` è¿”å› `undefined`ã€‚

#### æ³¨æ„äº‹é¡¹ {/*root-unmount-caveats*/}

* è°ƒç”¨ `root.unmout` å°†å¸è½½æ ¹èŠ‚ç‚¹å†…çš„æ‰€æœ‰ç»„ä»¶ï¼Œè¯¥æ ¹èŠ‚ç‚¹ä¸Šçš„ React å°†è¢«å‰¥ç¦»ï¼Œå³æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠç»„ä»¶æ ‘ä¸Šçš„çŠ¶æ€å°†è¢«ç§»é™¤ã€‚

* ä¸€æ—¦è°ƒç”¨ `root.unmout`ï¼Œå°±ä¸èƒ½åœ¨è¯¥æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ `root.render`ã€‚åœ¨ä¸€ä¸ªå·²ç»å¸è½½çš„æ ¹èŠ‚ç‚¹ä¸Šå°è¯•è°ƒç”¨ `root.render` å°†ä¼šæŠ›å‡ºå¼‚å¸¸é”™è¯¯ä¿¡æ¯â€œæ— æ³•æ›´æ–°ä¸€ä¸ªæœªæŒ‚è½½çš„æ ¹èŠ‚ç‚¹ï¼ˆCannot update an unmouted rootï¼‰â€ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨å¸è½½ä¸€ä¸ªæ ¹èŠ‚ç‚¹ååˆé‡æ–°åˆ›å»ºå®ƒã€‚

---

## ç”¨æ³• {/*usage*/}

### æ¸²æŸ“ä¸€ä¸ªå®Œå…¨ç”± React æ„å»ºçš„åº”ç”¨ {/*rendering-an-app-fully-built-with-react*/}

å¦‚æœåº”ç”¨ç¨‹åºæ˜¯å®Œå…¨ç”± React æ„å»ºçš„ï¼Œé‚£ä¹ˆè¯·ä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºå…¨å±€å”¯ä¸€çš„ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚

```js [[1, 3, "document.getElementById('root')"], [2, 4, "<App />"]]
import { createRoot } from 'react-dom/client';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨é¡¹ç›®å¯åŠ¨é˜¶æ®µï¼Œä½ åªéœ€è¦è¿è¡Œä¸‹é¢çš„ä»£ç ã€‚å®ƒå°†ä¼šï¼š

1. è·å– HTML ä¸­å®šä¹‰çš„<CodeStep step={1}>DOM èŠ‚ç‚¹</CodeStep>ã€‚
2. åœ¨è¯¥ DOM èŠ‚ç‚¹ä¸­æ˜¾ç¤º <CodeStep step={2}>React ç»„ä»¶</CodeStep>ã€‚

<Sandpack>

```html public/index.html
<!DOCTYPE html>
<html>
  <head><title>My app</title></head>
  <body>
    <!-- è¿™å°±æ˜¯æˆ‘ä»¬æåˆ°çš„ DOM èŠ‚ç‚¹ -->
    <div id="root"></div>
  </body>
</html>
```

```js src/index.js active
import { createRoot } from 'react-dom/client';
import App from './App.js';
import './styles.css';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

```js src/App.js
import { useState } from 'react';

export default function App() {
  return (
    <>
      <h1>ä½ å¥½ï¼Œä¸–ç•Œ!</h1>
      <Counter />
    </>
  );
}

function Counter() {
  const [count, setCount] = useState(0);
  return (
    <button onClick={() => setCount(count + 1)}>
      ç‚¹å‡»äº† {count} æ¬¡
    </button>
  );
}
```

</Sandpack>

**å¦‚æœä½ çš„åº”ç”¨ç¨‹åºå®Œå…¨ç”± React æ„å»ºï¼Œä½ ä»…åº”è¯¥åˆ›å»ºå…¨å±€å”¯ä¸€çš„ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¹¶åªè°ƒç”¨ä¸€æ¬¡ [`root.render`](#root-render)**ã€‚

ä»è¿™æ—¶èµ·ï¼ŒReact å°†ä¼šæ§åˆ¶æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ DOMã€‚å¦‚æœè¦æ·»åŠ æ›´å¤šç»„ä»¶ï¼Œ[å¯ä»¥å°†å®ƒä»¬åµŒå¥—è¿› `App` ç»„ä»¶ä¸­](/learn/importing-and-exporting-components)ã€‚å¦‚æœä½ éœ€è¦æ›´æ–°è§†å›¾ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ [state](/reference/react/useState) åšåˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœä½ éœ€è¦é¢å¤–æ˜¾ç¤ºä¸€äº›åœ¨è¿™ä¸ª DOM èŠ‚ç‚¹ä¹‹å¤–çš„å†…å®¹ï¼Œæ¯”å¦‚ä¸€ä¸ªå¼¹çª—æˆ–è€…æç¤ºæ¡†ï¼Œé‚£ä¹ˆå¯ä»¥ [ä½¿ç”¨ portal è¿›è¡Œæ¸²æŸ“](/reference/react-dom/createPortal)ã€‚

<Note>

å½“ HTML ä¸ºç©ºæ—¶ï¼Œç”¨æˆ·å°†ä¼šçœ‹ä¸€ä¸ªç©ºç™½çš„é¡µé¢ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºä¸­çš„ JavaScript ä»£ç åŠ è½½å¹¶è¿è¡Œï¼š

```html
<div id="root"></div>
```

è¿™ä¸ªè¿‡ç¨‹å¤ªæ…¢äº†ï¼è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨ [æœåŠ¡ç«¯æˆ–è€…åº”ç”¨æ„å»ºæœŸé—´](/reference/react-dom/server) é€šè¿‡ç»„ä»¶ç”Ÿæˆä¸€äº›åˆå§‹ HTMLã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨ JavaScript åŠ è½½ä¹‹å‰ï¼Œç”¨æˆ·å°±èƒ½çœ‹åˆ°ä¸€äº›æ–‡å­—ã€å›¾ç‰‡ï¼Œä¹Ÿèƒ½ç‚¹å‡»é“¾æ¥ã€‚æˆ‘ä»¬æ¨è [ä½¿ç”¨æ¡†æ¶](/learn/start-a-new-react-project#full-stack-frameworks)ï¼Œé€šè¿‡æ¡†æ¶å¼€ç®±å³ç”¨çš„èƒ½åŠ›è½»æ˜“åœ°å®Œæˆè¿™ä¸ªä¼˜åŒ–ã€‚æ ¹æ®æ¡†æ¶è¿è¡Œçš„æ—¶æœºï¼Œåˆ†ä¸º **æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰** å’Œ **é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰**ã€‚

</Note>

<Pitfall>

**ä½¿ç”¨äº†æœåŠ¡ç«¯æ¸²æŸ“æˆ–è€…é™æ€ç«™ç‚¹ç”Ÿæˆçš„åº”ç”¨ç¨‹åºï¼Œå¿…é¡»è°ƒç”¨ [`hydrateRoot`](/reference/react-dom/client/hydrateRoot) è€Œä¸æ˜¯ `createRoot`**ã€‚è°ƒç”¨åï¼ŒReact å°†ä¼š **hydrate** HTML ä¸­çš„ DOM èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é”€æ¯åé‡æ–°åˆ›å»ºå®ƒä»¬ã€‚

</Pitfall>

---

### æ¸²æŸ“ä¸€ä¸ªéƒ¨åˆ†ç”± React æ„å»ºçš„åº”ç”¨ {/*rendering-a-page-partially-built-with-react*/}

å¦‚æœé¡µé¢ [ä¸å®Œå…¨æ˜¯ React æ„å»ºçš„](/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page)ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ `createRoot` ä¸ºæ¯ä¸€ä¸ªç”± React ç®¡ç†çš„é¡¶çº§è§†å›¾ç‰‡æ®µï¼Œå³ä¸€æ®µ DOM ä¸­çš„é¡¶çº§èŠ‚ç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚å¯ä»¥åœ¨æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸­è°ƒç”¨ [`root.render`](#root-render) æ¥æ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚

è¿™æ ·ä¾èµ–ï¼Œä¸¤ä¸ªä¸åŒçš„ React ç»„ä»¶åˆ†åˆ«åœ¨åŒä¸€ä¸ªæ–‡ä»¶ `index.html` å†…å®šä¹‰çš„ä¸¤ä¸ª DOM èŠ‚ç‚¹ä¸­è¢«æ¸²æŸ“ï¼š

<Sandpack>

```html public/index.html
<!DOCTYPE html>
<html>
  <head><title>My app</title></head>
  <body>
    <nav id="navigation"></nav>
    <main>
      <p>è¿™ä¸€æ®µä¸ä¼šè¢« React æ¸²æŸ“ï¼ˆå¯ä»¥æ‰“å¼€ index.html éªŒè¯è¿™ä¸€ç‚¹ï¼‰ã€‚</p>
      <section id="comments"></section>
    </main>
  </body>
</html>
```

```js src/index.js active
import './styles.css';
import { createRoot } from 'react-dom/client';
import { Comments, Navigation } from './Components.js';

const navDomNode = document.getElementById('navigation');
const navRoot = createRoot(navDomNode); 
navRoot.render(<Navigation />);

const commentDomNode = document.getElementById('comments');
const commentRoot = createRoot(commentDomNode); 
commentRoot.render(<Comments />);
```

```js src/Components.js
export function Navigation() {
  return (
    <ul>
      <NavLink href="/">Home</NavLink>
      <NavLink href="/about">About</NavLink>
    </ul>
  );
}

function NavLink({ href, children }) {
  return (
    <li>
      <a href={href}>{children}</a>
    </li>
  );
}

export function Comments() {
  return (
    <>
      <h2>Comments</h2>
      <Comment text="ä½ å¥½!" author="Sophie" />
      <Comment text="æœ€è¿‘æ€ä¹ˆæ ·?" author="Sunil" />
    </>
  );
}

function Comment({ text, author }) {
  return (
    <p>{text} â€” <i>{author}</i></p>
  );
}
```

```css
nav ul { padding: 0; margin: 0; }
nav ul li { display: inline-block; margin-right: 20px; }
```

</Sandpack>

ä¹Ÿå¯ä»¥é€šè¿‡ [`document.createElement()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement) åˆ›å»ºä¸€ä¸ªæ–°çš„ DOM èŠ‚ç‚¹ç„¶åæ‰‹åŠ¨å°†å…¶åŠ å…¥é¡µé¢æ–‡æ¡£ä¹‹ä¸­ã€‚


```js
const domNode = document.createElement('div');
const root = createRoot(domNode); 
root.render(<Comment />);
document.body.appendChild(domNode); // ä½ å¯ä»¥æŠŠå®ƒåŠ å…¥åˆ°é¡µé¢æ–‡æ¡£çš„ä»»ä½•ä½ç½®
```

è°ƒç”¨ [`root.unmount`](#root-unmount) å°†ä» DOM èŠ‚ç‚¹ç§»é™¤è¿™ä¸ª React æ ‘å¹¶æ¸…é™¤å®ƒä½¿ç”¨çš„èµ„æºã€‚

```js
root.unmount();
```

å¦‚æœ React ç»„ä»¶å¤„äºä¸€ä¸ªç”±ä¸åŒæ¡†æ¶æ„å»ºçš„åº”ç”¨ç¨‹åºä¹‹ä¸­æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°†ä¼šéå¸¸æœ‰ç”¨ã€‚

---

### æ›´æ–°ä¸€ä¸ªæ ¹ç»„ä»¶ {/*updating-a-root-component*/}

å¯ä»¥åœ¨åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Šå¤šæ¬¡è°ƒç”¨ `render`ã€‚åªè¦å½“å‰çš„ç»„ä»¶æ ‘ç»“æ„ä¸ä¹‹å‰æ¸²æŸ“çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼ŒReact å°†ä¼š [ä¿å­˜ state](/learn/preserving-and-resetting-state)ã€‚ä»”ç»†æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆèƒ½åœ¨è¾“å…¥æ¡†ä¸­æ­£å¸¸è¾“å…¥ï¼Ÿæ­£å¦‚ä¸‹æ–¹çš„ç¤ºä¾‹ï¼Œåœ¨æ¯ä¸€ç§’ä¸­å†…å¤šæ¬¡é‡å¤è°ƒç”¨ `render` åå‘ç”Ÿçš„æ›´æ–°ï¼Œæ˜¯éç ´åæ€§çš„ï¼š

<Sandpack>

```js src/index.js active
import { createRoot } from 'react-dom/client';
import './styles.css';
import App from './App.js';

const root = createRoot(document.getElementById('root'));

let i = 0;
setInterval(() => {
  root.render(<App counter={i} />);
  i++;
}, 1000);
```

```js src/App.js
export default function App({counter}) {
  return (
    <>
      <h1>ä½ å¥½ï¼Œä¸–ç•Œï¼{counter}</h1>
      <input placeholder="åœ¨è¿™é‡Œè¾“å…¥ä¸€äº›å†…å®¹" />
    </>
  );
}
```

</Sandpack>

å¤šæ¬¡è°ƒç”¨ `render` æ˜¯ä¸€ä¸ªä¸å¸¸è§çš„äº‹æƒ…ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ çš„ç»„ä»¶å°†é€šè¿‡ [æ›´æ–° state](/reference/react/useState) è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚

### Error logging in production {/*error-logging-in-production*/}

By default, React will log all errors to the console. To implement your own error reporting, you can provide the optional error handler root options `onUncaughtError`, `onCaughtError` and `onRecoverableError`:

```js [[1, 6, "onCaughtError"], [2, 6, "error", 1], [3, 6, "errorInfo"], [4, 10, "componentStack", 15]]
import { createRoot } from "react-dom/client";
import { reportCaughtError } from "./reportError";

const container = document.getElementById("root");
const root = createRoot(container, {
  onCaughtError: (error, errorInfo) => {
    if (error.message !== "Known error") {
      reportCaughtError({
        error,
        componentStack: errorInfo.componentStack,
      });
    }
  },
});
```

The <CodeStep step={1}>onCaughtError</CodeStep> option is a function called with two arguments:

1. The <CodeStep step={2}>error</CodeStep> that was thrown.
2. An <CodeStep step={3}>errorInfo</CodeStep> object that contains the <CodeStep step={4}>componentStack</CodeStep> of the error.

Together with `onUncaughtError` and `onRecoverableError`, you can can implement your own error reporting system:

<Sandpack>

```js src/reportError.js
function reportError({ type, error, errorInfo }) {
  // The specific implementation is up to you.
  // `console.error()` is only used for demonstration purposes.
  console.error(type, error, "Component Stack: ");
  console.error("Component Stack: ", errorInfo.componentStack);
}

export function onCaughtErrorProd(error, errorInfo) {
  if (error.message !== "Known error") {
    reportError({ type: "Caught", error, errorInfo });
  }
}

export function onUncaughtErrorProd(error, errorInfo) {
  reportError({ type: "Uncaught", error, errorInfo });
}

export function onRecoverableErrorProd(error, errorInfo) {
  reportError({ type: "Recoverable", error, errorInfo });
}
```

```js src/index.js active
import { createRoot } from "react-dom/client";
import App from "./App.js";
import {
  onCaughtErrorProd,
  onRecoverableErrorProd,
  onUncaughtErrorProd,
} from "./reportError";

const container = document.getElementById("root");
const root = createRoot(container, {
  // Keep in mind to remove these options in development to leverage
  // React's default handlers or implement your own overlay for development.
  // The handlers are only specfied unconditionally here for demonstration purposes.
  onCaughtError: onCaughtErrorProd,
  onRecoverableError: onRecoverableErrorProd,
  onUncaughtError: onUncaughtErrorProd,
});
root.render(<App />);
```

```js src/App.js
import { Component, useState } from "react";

function Boom() {
  foo.bar = "baz";
}

class ErrorBoundary extends Component {
  state = { hasError: false };

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return <h1>Something went wrong.</h1>;
    }
    return this.props.children;
  }
}

export default function App() {
  const [triggerUncaughtError, settriggerUncaughtError] = useState(false);
  const [triggerCaughtError, setTriggerCaughtError] = useState(false);

  return (
    <>
      <button onClick={() => settriggerUncaughtError(true)}>
        Trigger uncaught error
      </button>
      {triggerUncaughtError && <Boom />}
      <button onClick={() => setTriggerCaughtError(true)}>
        Trigger caught error
      </button>
      {triggerCaughtError && (
        <ErrorBoundary>
          <Boom />
        </ErrorBoundary>
      )}
    </>
  );
}
```

</Sandpack>

---
## é”™è¯¯æ’æŸ¥ {/*troubleshooting*/}

### æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯é¡µé¢æ²¡æœ‰æ˜¾ç¤ºä»»ä½•å†…å®¹ {/*ive-created-a-root-but-nothing-is-displayed*/}

ç¡®ä¿ä½ æ²¡æœ‰å¿˜è®°åœ¨æ ¹èŠ‚ç‚¹ä¸Š **æ¸²æŸ“** ä½ çš„åº”ç”¨ç¨‹åºï¼š

```js {5}
import { createRoot } from 'react-dom/client';
import App from './App.js';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

åœ¨ä½ è¿›è¡Œæ¸²æŸ“ä¹‹å‰ï¼Œé¡µé¢ä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚

---

### I'm getting an error: "You passed a second argument to root.render" {/*im-getting-an-error-you-passed-a-second-argument-to-root-render*/}

A common mistake is to pass the options for `createRoot` to `root.render(...)`:

<ConsoleBlock level="error">

Warning: You passed a second argument to root.render(...) but it only accepts one argument.

</ConsoleBlock>

To fix, pass the root options to `createRoot(...)`, not `root.render(...)`:
```js {2,5}
// ğŸš© Wrong: root.render only takes one argument.
root.render(App, {onUncaughtError});

// âœ… Correct: pass options to createRoot.
const root = createRoot(container, {onUncaughtError}); 
root.render(<App />);
```

---

### I'm getting an error: "Target container is not a DOM element" {/*im-getting-an-error-target-container-is-not-a-dom-element*/}

è¿™ä¸ªå¼‚å¸¸é”™è¯¯å³å­—é¢æ„æ€ï¼Œä½ ä¼ é€’ç»™ `createRoot` çš„å†…å®¹ä¸æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚

å¦‚æœä½ ä¸ç¡®å®šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¯•ç€åœ¨æ§åˆ¶å°æ‰“å°å®ƒï¼š

```js {2}
const domNode = document.getElementById('root');
console.log(domNode); // ï¼Ÿï¼Ÿï¼Ÿ
const root = createRoot(domNode);
root.render(<App />);
```
ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ `domNode` æ˜¯ `null`ï¼Œä»£è¡¨ç€ [`getElementById`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementById) è¿”å›äº† `null`ã€‚è¿™æ„å‘³ç€ä½ åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œé¡µé¢æ–‡æ¡£å†…å¹¶ä¸å­˜åœ¨æŒ‡å®šçš„ id å¯¹åº”çš„å…ƒç´ ï¼Œäºæ˜¯å°±å‡ºç°äº†è¿™ä¸ªé—®é¢˜ã€‚è¿™é‡Œæœ‰ä¸€äº›å¯èƒ½çš„åŸå› ï¼š


1. ä½ ä½¿ç”¨çš„ id å¯èƒ½å’Œ HTML æ–‡ä»¶ä¸­çš„ id ä¸åŒã€‚è¯·æ£€æŸ¥ä¸€ä¸‹ä½ çš„æ‹¼å†™æ˜¯å¦æ­£ç¡®ï¼
2. æ‰“åŒ…æ„å»ºäº§ç‰©çš„ HTML æ–‡ä»¶ä¸­çš„ `<script>` æ ‡ç­¾ï¼Œä¸èƒ½æ„ŸçŸ¥åˆ°åœ¨å®ƒæ‰§è¡Œ **ä¹‹å** æ‰å‡ºç°çš„ DOM èŠ‚ç‚¹ã€‚

è§¦å‘è¿™ä¸ªå¼‚å¸¸æŠ¥é”™çš„å¦ä¸€ä¸ªå¸¸è§æ–¹å¼æ˜¯ï¼Œå°† `createRoot(domNode)` é”™å†™æˆ `createRoot(<App />)`ã€‚

---

### æˆ‘å¾—åˆ°äº†ä¸€ä¸ªå¼‚å¸¸æŠ¥é”™ä¿¡æ¯ï¼šâ€œå‡½æ•°ä¸æ˜¯åˆæ³•çš„ React å­é¡¹ï¼ˆFunctions are not valid as a React childï¼‰â€ {/*im-getting-an-error-functions-are-not-valid-as-a-react-child*/}

è¿™ä¸ªé”™è¯¯æ„å‘³ç€ï¼Œä½ ä¼ é€’ç»™ `root.render` çš„å†…å®¹ä¸æ˜¯ä¸€ä¸ª React ç»„ä»¶ã€‚

è¿™å¯èƒ½å‘ç”Ÿåœ¨ä½ ä½¿ç”¨ `Component` è€Œä¸æ˜¯ `<Component />` ä½œä¸ºå‚æ•°å¯¹ `root.render` è¿›è¡Œè°ƒç”¨æ—¶ï¼š

```js {2,5}
// ğŸš© é”™è¯¯æ–¹å¼ï¼šApp æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚
root.render(App);

// âœ… æ­£ç¡®æ–¹å¼ï¼š<App /> æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚
root.render(<App />);
```

æˆ–è€…ä½ å‘ `root.render` ä¼ é€’äº†ä¸€ä¸ªå‡½æ•°æœ¬èº«ï¼Œè€Œä¸æ˜¯å…¶è¿”å›å€¼ï¼š

```js {2,5}
// ğŸš© é”™è¯¯æ–¹å¼ï¼šcreateApp æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚
root.render(createApp);

// âœ… æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨ createApp æ‰§è¡Œåè¿”å›çš„ç»„ä»¶ã€‚
root.render(createApp());
```

---

### æˆ‘çš„æœåŠ¡ç«¯æ¸²æŸ“çš„ HTML åœ¨æ›´æ–°æ—¶ä¼šå…¨éƒ¨é‡æ–°åˆ›å»º {/*æˆ‘çš„æœåŠ¡ç«¯æ¸²æŸ“çš„-html-åœ¨æ›´æ–°æ—¶ä¼šå…¨éƒ¨é‡æ–°åˆ›å»º*/}

å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ï¼Œå¹¶ä¸”åŒ…å«äº†ç”± React ç”Ÿæˆçš„åˆå§‹ HTMLï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹åè°ƒç”¨ `root.render` æ—¶ä¼šåˆ é™¤æ‰€æœ‰åˆå§‹ HTMLï¼Œç„¶åé‡æ–°ç”Ÿæˆæ‰€æœ‰ DOM èŠ‚ç‚¹ã€‚è¿™å¯èƒ½ä¼šè®©ä½ çš„åº”ç”¨å˜å¾—æ¯”å®¢æˆ·ç«¯æ¸²æŸ“æ›´æ…¢ï¼Œå¹¶ä¸”åœ¨ç”¨æˆ·è¾“å…¥å¤±å»ç„¦ç‚¹å’Œæ»‘åŠ¨æ»šåŠ¨æ¡æ—¶ä¸¢å¤±ç”¨æˆ·è¾“å…¥çš„å†…å®¹ã€‚

æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ç¨‹åºå¿…é¡»ä½¿ç”¨ [`hydrateRoot`](/reference/react-dom/client/hydrateRoot) æ›¿ä»£ `createRoot`ï¼š

```js {1,4-7}
import { hydrateRoot } from 'react-dom/client';
import App from './App.js';

hydrateRoot(
  document.getElementById('root'),
  <App />
);
```

è¯·æ³¨æ„ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„ API æ˜¯ä¸åŒçš„ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ä¼šå†æœ‰ `root.render` è°ƒç”¨ã€‚
